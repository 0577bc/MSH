# 代码拆分后功能测试清单

**创建日期**: 2025-10-13  
**测试版本**: v3.0 (模块化重构后)  
**测试负责人**: 待定  
**预计测试时间**: 2025-10-14

---

## 📋 测试准备

### 环境准备
- [ ] 启动本地服务器：`python3 -m http.server 8000`
- [ ] 浏览器打开：`http://localhost:8000`
- [ ] 打开浏览器开发者工具（F12）
- [ ] 清除浏览器缓存和localStorage
- [ ] 准备测试数据记录表格

### 备份验证
- [ ] 确认所有备份文件存在（`*.backup`, `*.pre-split-backup`）
- [ ] 确认回滚脚本可用
- [ ] 记录当前Git commit ID

---

## 🎯 核心功能测试

### 1. 主签到页面（index.html）

#### 页面加载
- [ ] 页面正常加载，无404错误
- [ ] 所有样式正常显示
- [ ] 无JavaScript错误（查看Console）
- [ ] Firebase连接成功
- [ ] 数据加载完成

#### 模块加载检查（Console）
```
期望看到：
✅ firebase-utils.js 已加载
✅ time-utils.js 已加载
✅ security-utils.js 已加载
✅ uuid-manager.js 已加载
✅ sunday-tracking-utils.js 已加载
✅ sync-managers.js 已加载
✅ 工具函数模块已全部加载
```

#### 签到功能
- [ ] 小组下拉菜单正常显示
- [ ] 选择小组后成员列表加载
- [ ] 可以选择成员
- [ ] 签到按钮可点击
- [ ] 签到成功提示
- [ ] 签到记录显示在页面下方
- [ ] 签到数据同步到Firebase

#### 新朋友登记
- [ ] 点击"新朋友"按钮打开表单
- [ ] 输入所有必填字段
- [ ] 提交成功
- [ ] 新朋友出现在成员列表
- [ ] 可以为新朋友签到

#### 数据同步
- [ ] 查看同步按钮状态
- [ ] 点击手动同步
- [ ] 同步成功提示
- [ ] 数据正确上传到Firebase

---

### 2. 管理员页面（admin.html）

#### 页面加载
- [ ] 页面正常加载
- [ ] 所有模块加载成功
- [ ] Firebase连接正常

#### 数据管理
- [ ] 查看所有签到记录
- [ ] 数据筛选功能正常
- [ ] 导出功能正常
- [ ] 统计数据准确

---

### 3. 成员管理页面（group-management.html）

#### 页面加载
- [ ] 页面正常加载
- [ ] 所有小组正常显示
- [ ] 成员列表加载完整

#### 成员操作
- [ ] 添加新成员
- [ ] 编辑成员信息
- [ ] 删除成员（谨慎测试）
- [ ] 成员转组功能
- [ ] UUID正确生成和显示

#### 数据同步
- [ ] 修改后数据同步到Firebase
- [ ] 刷新页面数据保持
- [ ] 多标签页数据一致性

---

### 4. 签到汇总页面（summary.html）

#### 页面加载
- [ ] 页面正常加载
- [ ] 样式正确显示
- [ ] 模块加载成功

#### 统计功能
- [ ] 日期选择器正常
- [ ] 小组筛选正常
- [ ] 签到数据正确显示
- [ ] 统计数字准确
- [ ] 图表显示正常（如有）

#### 排除人员功能
- [ ] 排除人员不计入统计
- [ ] UUID匹配正确
- [ ] 姓名匹配兼容

---

### 5. 主日跟踪页面（sunday-tracking.html）

#### 页面加载
- [ ] 页面正常加载
- [ ] 主日跟踪模块加载成功（4个子模块）
- [ ] 样式正确显示

#### 模块加载检查
```
期望看到：
✅ sunday-tracking/index.js 已加载
✅ sunday-tracking/data-handler.js 已加载
✅ sunday-tracking/event-manager.js 已加载
✅ sunday-tracking/ui-components.js 已加载
```

#### 跟踪功能
- [ ] 跟踪列表正常显示
- [ ] 连续缺勤计算准确
- [ ] 创建跟踪事件
- [ ] 事件状态变更（跟踪中/已终止/已解决）
- [ ] 缓存机制正常工作
- [ ] 事件历史记录完整

#### 外部表单集成
- [ ] 外部表单按钮显示
- [ ] 跳转到外部表单系统
- [ ] 返回主日跟踪页面正常

---

### 6. 日报页面（daily-report.html）

#### 页面加载
- [ ] 页面正常加载
- [ ] 模块加载成功

#### 报表功能
- [ ] 日期选择正常
- [ ] 数据查询正常
- [ ] 报表生成正确
- [ ] 导出功能正常

---

### 7. 签到记录页面（attendance-records.html）

#### 页面功能
- [ ] 记录列表显示
- [ ] 筛选功能正常
- [ ] 搜索功能正常
- [ ] 记录详情显示
- [ ] 编辑功能正常（如有）

---

### 8. 个人页面（personal-page.html）

#### 页面功能
- [ ] 个人信息显示
- [ ] 签到日历显示
- [ ] 签到历史记录
- [ ] 统计数据准确

---

### 9. 跟踪事件详情（tracking-event-detail.html）

#### 页面功能
- [ ] 事件详情显示
- [ ] 时间线正确
- [ ] 操作记录完整
- [ ] 状态变更历史

---

## 🔍 性能测试

### 页面加载性能
- [ ] 首屏加载时间 < 3秒
- [ ] JavaScript加载时间合理
- [ ] CSS加载无阻塞
- [ ] 无重复资源加载

### 数据同步性能
- [ ] 数据加载速度合理
- [ ] 同步操作响应快速
- [ ] 无卡顿现象
- [ ] 内存使用正常

### 缓存性能
- [ ] localStorage正常工作
- [ ] 缓存命中率高
- [ ] 缓存失效机制正常
- [ ] 缓存大小控制合理

---

## 🐛 错误检查

### Console检查
- [ ] 无JavaScript错误
- [ ] 无CSS加载失败
- [ ] 无404资源错误
- [ ] 无警告信息（或已知警告）

### Network检查
- [ ] 所有模块文件正确加载
- [ ] 文件路径正确（`./src/core/`, `./src/data/`等）
- [ ] 无多余的网络请求
- [ ] Firebase连接稳定

### 数据完整性
- [ ] 签到记录完整
- [ ] 成员数据完整
- [ ] UUID一致性
- [ ] 无数据丢失

---

## 📱 兼容性测试

### 浏览器兼容性
- [ ] Chrome（最新版）
- [ ] Safari（最新版）
- [ ] Firefox（最新版）
- [ ] Edge（最新版）

### 设备兼容性
- [ ] 桌面端（1920x1080）
- [ ] 笔记本（1366x768）
- [ ] 平板（768x1024）
- [ ] 手机（375x667）

---

## 🔐 安全测试

### 数据安全
- [ ] 不能使用`.set()`覆盖全部数据
- [ ] 数据量检查机制生效
- [ ] localStorage加密正常
- [ ] 防重复提交机制生效

### Firebase安全
- [ ] Firebase规则正确配置
- [ ] 权限控制正常
- [ ] 数据访问受限

---

## 📊 回归测试

### 已知功能验证
- [ ] 所有旧功能正常工作
- [ ] 无功能退化
- [ ] 数据格式兼容
- [ ] API接口兼容

---

## 🔄 回滚测试

### 回滚准备
- [ ] 备份文件完整
- [ ] 回滚脚本可执行
- [ ] 回滚步骤文档清晰

### 回滚验证（如需要）
- [ ] 执行回滚脚本
- [ ] 系统恢复到拆分前状态
- [ ] 所有功能正常
- [ ] 数据无丢失

---

## 📝 Bug记录模板

### Bug信息
- **页面**: 
- **模块**: 
- **问题描述**: 
- **重现步骤**: 
  1. 
  2. 
  3. 
- **预期结果**: 
- **实际结果**: 
- **Console错误**: 
- **截图**: 
- **严重程度**: 🔴严重 / 🟡中等 / 🟢轻微
- **是否阻塞**: ✅是 / ❌否

---

## ✅ 测试完成标准

### 必须通过
- [ ] 所有核心功能正常（签到、管理、统计）
- [ ] 无阻塞性bug
- [ ] Console无严重错误
- [ ] 数据同步正常
- [ ] 性能无明显退化

### 建议通过
- [ ] 所有页面测试完成
- [ ] 兼容性测试通过
- [ ] 性能指标达标
- [ ] 安全测试通过
- [ ] 文档已更新

---

## 📞 问题上报

### 如发现严重问题
1. 立即停止测试
2. 记录详细错误信息
3. 保存Console截图
4. 保存Network截图
5. 准备回滚

### 如发现一般问题
1. 记录到Bug列表
2. 继续测试其他功能
3. 汇总后统一修复

---

**测试日期**: _______________  
**测试人员**: _______________  
**测试结果**: ⭕待测试 / ✅通过 / ❌失败  
**备注**: _______________

---

**回滚命令（紧急使用）**:
```bash
cd /Users/benchen/MSH
for f in *.pre-split-backup; do mv "$f" "${f%.pre-split-backup}"; done
mv src/utils.js.backup src/utils.js
mv src/style.css.backup src/style.css
mv src/new-data-manager.js.backup src/new-data-manager.js
mv src/sunday-tracking.js.backup src/sunday-tracking.js
```

