# MSH系统测试清单

> **创建日期**: 2025-10-06  
> **测试目的**: 验证数据同步优化方案实施后的所有功能  
> **测试方法**: 手动测试每个页面和功能  

## 📋 测试说明

- ✅ = 测试通过
- ❌ = 测试失败
- ⚠️ = 部分通过/有问题
- ⏸️ = 待测试

## 🎯 核心页面测试

| 序号 | 页面名称 | 文件路径 | 主要功能 | 测试重点 | 状态 | 备注 |
|------|---------|---------|---------|---------|------|------|
| 1 | 签到页面 | `index.html` | 成员签到、新朋友添加 | Firebase数据拉取、签到数据本地优先、同步按钮、group0处理 | ⏸️ | 核心功能页面 |
| 2 | 管理页面 | `admin.html` | 成员管理、小组管理 | 成员CRUD、小组CRUD、Firebase同步、group0显示 | ⏸️ | 核心管理页面 |
| 3 | 签到记录 | `attendance-records.html` | 查看所有签到记录 | 记录列表、筛选功能、导出功能 | ⏸️ | 记录查看页面 |
| 4 | 每日报表 | `daily-report.html` | 生成每日签到报表 | 报表生成、统计计算、排除人员处理 | ⏸️ | 报表页面 |
| 5 | 汇总报表 | `summary.html` | 生成签到汇总报表 | 汇总统计、group0排序、排除人员过滤 | ⏸️ | 汇总页面 |
| 6 | 事件管理 | `absence-events.html` | 缺勤事件管理、转发外部表单 | 事件关闭、转发、筛选 | ⏸️ | 替代主日跟踪页面 |
| 7 | 个人主日跟踪 | `personal-page.html` | 按成员查看事件与回访 | 事件列表、回访录入、过滤 | ⏸️ | 新增页面 |
| 8 | 小组管理 | `group-management.html` | 小组信息管理 | 小组列表、成员分配、group0管理 | ⏸️ | 小组管理页面 |
| 9 | 小组签到表单 | `group-signin/group-signin-form.html` | 小组签到表单 | 表单提交、数据验证 | ⏸️ | 表单页面 |
| 10 | 小组签到结果 | `group-signin/group-signin-result.html` | 签到结果展示 | 结果显示、数据统计 | ⏸️ | 结果页面 |
| 11 | 小组成员管理 | `group-signin/member-management.html` | 小组内成员管理 | 成员列表、成员操作 | ⏸️ | 成员管理页面 |

## 🛠️ 工具页面测试

### MSH系统工具

| 序号 | 工具名称 | 文件路径 | 主要功能 | 测试重点 | 状态 | 备注 |
|------|---------|---------|---------|---------|------|------|
| 13 | 数据冲突管理 | `tools/msh-system/data-conflict-manager.html` | 冲突检测、隔离管理、删除管理 | **新增冲突隔离标签页**、冲突检测、Firebase同步 | ⏸️ | 🆕 新增隔离功能 |
| 14 | 数据一致性验证 | `tools/msh-system/data-consistency-validator.html` | 数据一致性检查 | 数据对比、不一致报告 | ⏸️ | 验证工具 |
| 15 | 成员分布检查 | `tools/msh-system/member-distribution-checker.html` | 成员分布统计 | 分布统计、**新增同步控制**、未分组检测 | ⏸️ | 🆕 新增同步功能 |
| 16 | 数据备份管理 | `tools/msh-system/data-backup-manager.html` | 数据备份恢复 | **创建备份、恢复备份、导入导出** | ⏸️ | 🆕 全新工具 |
| 17 | 功能测试工具 | `tools/msh-system/functional-testing.html` | 系统功能测试 | **批量测试、测试报告** | ⏸️ | 🆕 全新工具 |
| 18 | 系统验证工具 | `tools/msh-system/system-verification.html` | 系统全面验证 | **核心功能验证、集成验证** | ⏸️ | 🆕 全新工具 |
| 19 | 紧急数据检查 | `tools/msh-system/emergency-data-check.html` | 紧急数据检查 | 快速数据检查、Firebase状态 | ⏸️ | 紧急工具 |
| 20 | 成员UUID编辑器 | `tools/msh-system/member-uuid-editor.html` | 批量编辑UUID | UUID编辑、批量更新 | ⏸️ | UUID工具 |
| 21 | 组别键名标准化 | `tools/msh-system/group-key-standardizer.html` | 组别键名标准化 | **group0标准化**、键名映射 | ⏸️ | 标准化工具 |
| 22 | 历史数据整合 | `tools/msh-system/historical-data-integration.html` | 历史数据整合 | 数据导入、**group0处理** | ⏸️ | 整合工具 |
| 23 | 未分组人员恢复 | `tools/msh-system/unassigned-group-recovery.html` | 恢复未分组人员 | **group0人员恢复**、数据同步 | ⏸️ | 恢复工具 |
| 24 | 重复记录清理 | `tools/msh-system/duplicate-record-cleaner.html` | 清理重复记录 | 重复检测、记录清理 | ⏸️ | 清理工具 |

### 跨系统工具

| 序号 | 工具名称 | 文件路径 | 主要功能 | 测试重点 | 状态 | 备注 |
|------|---------|---------|---------|---------|------|------|
| 25 | 跨系统工具 | `tools/cross-system/index.html` | MSH与外部表单集成 | 数据转换、系统对接 | ⏸️ | 集成工具 |

### 云表单工具

| 序号 | 工具名称 | 文件路径 | 主要功能 | 测试重点 | 状态 | 备注 |
|------|---------|---------|---------|---------|------|------|
| 26 | 外部表单管理 | `tools/cloud-forms/external-form-admin.html` | 外部表单管理 | 表单配置、数据管理 | ⏸️ | 表单管理 |
| 27 | 外部表单公开页 | `tools/cloud-forms/external-form-public.html` | 外部表单公开访问 | 表单提交、数据验证 | ⏸️ | 公开表单 |

## 🆕 新增功能模块测试

| 序号 | 功能模块 | 相关文件 | 主要功能 | 测试重点 | 状态 | 备注 |
|------|---------|---------|---------|---------|------|------|
| 28 | 冲突隔离机制 | `data-conflict-manager.html` | 隔离数据管理 | 隔离区加载、解决、恢复、删除、Firebase同步 | ⏸️ | 🆕 核心功能 |
| 29 | 排除人员标记化 | `src/utils.js` | 成员标记管理 | `getExcludedMembers()`、`setMemberExcluded()`、`migrateExcludedMembers()` | ⏸️ | 🆕 核心功能 |
| 30 | 数据备份管理器 | `src/data-backup-manager.js` | 自动备份恢复 | 创建备份、恢复备份、自动备份、导入导出 | ⏸️ | 🆕 核心功能 |
| 31 | 性能监控器 | `src/performance-monitor.js` | 性能监控 | 页面加载监控、数据加载监控、Firebase监控、内存监控 | ⏸️ | 🆕 核心功能 |
| 32 | 用户反馈收集器 | `src/user-feedback-collector.js` | 反馈收集 | 反馈按钮、反馈表单、行为收集、数据导出 | ⏸️ | 🆕 核心功能 |

## 📊 核心逻辑测试

| 序号 | 逻辑模块 | 测试项 | 测试内容 | 状态 | 备注 |
|------|---------|--------|---------|------|------|
| 33 | group0键名 | 排序逻辑 | group0是否排在第一位 | ⏸️ | 核心逻辑 |
| 34 | group0键名 | 数据初始化 | 系统启动时group0是否自动创建 | ⏸️ | 核心逻辑 |
| 35 | group0键名 | 数据加载 | Firebase拉取后group0是否正确处理 | ⏸️ | 核心逻辑 |
| 36 | 四层同步机制 | Firebase同步 | 数据是否正确同步到Firebase | ⏸️ | 核心逻辑 |
| 37 | 四层同步机制 | 本地存储同步 | 数据是否正确保存到localStorage | ⏸️ | 核心逻辑 |
| 38 | 四层同步机制 | 全局变量同步 | window对象是否正确更新 | ⏸️ | 核心逻辑 |
| 39 | 四层同步机制 | 事件触发同步 | 事件是否正确触发和监听 | ⏸️ | 核心逻辑 |
| 40 | 排除人员 | 标记功能 | 成员excluded标记是否正确 | ⏸️ | 核心逻辑 |
| 41 | 排除人员 | 迁移功能 | 旧数据是否正确迁移 | ⏸️ | 核心逻辑 |
| 42 | 排除人员 | 过滤功能 | 报表是否正确过滤排除人员 | ⏸️ | 核心逻辑 |

## 🔍 详细测试步骤

### 1. 签到页面 (index.html)

**测试步骤**:
1. 打开页面，检查是否正常加载
2. 检查成员列表是否从Firebase加载
3. 检查group0是否排在第一位
4. 测试签到功能是否正常
5. 测试新朋友添加功能
6. 测试同步按钮是否正常工作
7. 检查本地存储和Firebase是否同步

**预期结果**:
- 页面正常加载，无错误
- 成员列表正确显示
- group0排在最前面
- 签到数据以本地为准
- 同步功能正常工作

---

### 2. 管理页面 (admin.html)

**测试步骤**:
1. 打开页面，检查是否正常加载
2. 检查成员列表和小组列表
3. 检查group0是否显示为"未分组"并排在第一位
4. 测试添加成员功能
5. 测试编辑成员功能
6. 测试删除成员功能
7. 测试小组管理功能
8. 检查Firebase同步是否正常

**预期结果**:
- 所有CRUD操作正常
- group0显示和排序正确
- Firebase同步正常

---

### 3. 数据冲突管理工具 (data-conflict-manager.html)

**测试步骤**:
1. 打开页面，检查是否正常加载
2. 点击"检测冲突"按钮
3. 检查冲突列表是否正确显示
4. 切换到"🛡️ 冲突隔离"标签页 **[新增功能]**
5. 点击"刷新隔离数据"按钮
6. 测试隔离项的选择功能
7. 测试"解决选中项"功能
8. 测试"恢复选中项"功能
9. 测试"删除选中项"功能
10. 测试"清空所有隔离"功能
11. 检查Firebase同步是否正常

**预期结果**:
- 冲突检测正常工作
- 隔离标签页正常显示
- 所有隔离操作正常工作
- Firebase同步正常

---

### 4. 成员分布检查工具 (member-distribution-checker.html)

**测试步骤**:
1. 打开页面，检查是否正常加载
2. 点击"开始检查"按钮
3. 检查成员分布统计是否正确
4. 检查未分组成员是否正确识别
5. 测试"导入未分组成员"功能
6. 测试"☁️ 同步到Firebase"按钮 **[新增功能]**
7. 测试"⬇️ 从Firebase同步"按钮 **[新增功能]**
8. 测试"🔄 强制全量同步"按钮 **[新增功能]**
9. 测试"📊 检查同步状态"按钮 **[新增功能]**
10. 检查同步状态显示是否正确

**预期结果**:
- 成员分布统计正确
- 同步控制功能正常工作
- Firebase同步正常

---

### 5. 数据备份管理工具 (data-backup-manager.html) **[全新工具]**

**测试步骤**:
1. 打开页面，检查是否正常加载
2. 检查备份统计是否显示
3. 点击"💾 创建备份"按钮
4. 检查备份列表是否更新
5. 测试"恢复"功能
6. 测试"导出"功能
7. 测试"导入备份"功能
8. 测试"删除"功能
9. 测试"🔄 自动备份"按钮
10. 测试"🧹 清理旧备份"按钮

**预期结果**:
- 所有备份操作正常工作
- 备份数据正确保存到Firebase
- 恢复功能正常工作

---

### 6. 功能测试工具 (functional-testing.html) **[全新工具]**

**测试步骤**:
1. 打开页面，检查是否正常加载
2. 点击"🚀 运行所有测试"按钮
3. 检查测试结果是否正确显示
4. 查看每个测试项的详细结果
5. 测试单个测试项的运行
6. 检查测试统计是否正确

**预期结果**:
- 所有测试项正常运行
- 测试结果正确显示
- 测试统计正确

---

### 7. 系统验证工具 (system-verification.html) **[全新工具]**

**测试步骤**:
1. 打开页面，检查是否正常加载
2. 点击"🚀 运行所有验证"按钮
3. 检查验证结果是否正确显示
4. 查看每个验证项的详细结果
5. 检查验证统计是否正确
6. 测试单个验证项的运行

**预期结果**:
- 所有验证项正常运行
- 验证结果正确显示
- 系统集成验证通过

---

### 8. 排除人员标记化功能测试

**测试步骤**:
1. 打开管理页面，选择一个成员
2. 在成员信息中添加excluded: true标记
3. 保存并同步到Firebase
4. 打开每日报表页面
5. 检查该成员是否被正确排除
6. 检查汇总报表是否正确处理排除人员
7. 运行数据迁移函数 `window.utils.migrateExcludedMembers()`
8. 检查旧的排除人员数据是否正确迁移

**预期结果**:
- 排除标记正确保存
- 报表正确过滤排除人员
- 数据迁移功能正常工作

---

### 9. 性能监控器测试

**测试步骤**:
1. 打开浏览器控制台
2. 检查是否有"✅ 性能监控器已初始化"日志
3. 执行 `window.performanceMonitor.getPerformanceReport()`
4. 检查性能报告是否正确生成
5. 浏览多个页面，观察性能数据收集
6. 检查性能建议是否合理

**预期结果**:
- 性能监控器正常运行
- 性能数据正确收集
- 性能报告正确生成

---

### 10. 用户反馈收集器测试

**测试步骤**:
1. 检查页面右下角是否有"💬 反馈"按钮
2. 点击反馈按钮
3. 填写反馈表单
4. 提交反馈
5. 检查反馈是否保存到localStorage
6. 检查反馈是否同步到Firebase
7. 执行 `window.userFeedbackCollector.getFeedbackStats()`
8. 检查反馈统计是否正确

**预期结果**:
- 反馈按钮正常显示
- 反馈表单正常工作
- 反馈数据正确保存和同步

---

## 📝 测试记录表

| 日期 | 测试人 | 测试项 | 结果 | 问题描述 | 解决方案 |
|------|--------|--------|------|---------|---------|
| 2025-10-06 |  |  |  |  |  |

## 🐛 问题跟踪表

| 问题ID | 发现日期 | 页面/功能 | 问题描述 | 严重程度 | 状态 | 解决日期 |
|--------|---------|----------|---------|---------|------|---------|
| 001 |  |  |  | 🔴高/🟡中/🟢低 | 待处理 |  |

## ✅ 测试完成标准

- [ ] 所有核心页面测试通过
- [ ] 所有工具页面测试通过
- [ ] 所有新增功能测试通过π
- [ ] 核心逻辑测试通过
- [ ] 无严重Bug
- [ ] 无中等Bug或已记录
- [ ] 性能指标符合预期
- [ ] 用户反馈系统正常工作

## 📊 测试总结

**测试开始时间**: _______________  
**测试结束时间**: _______________  
**总测试项**: 42项  
**通过项**: _______________  
**失败项**: _______________  
**通过率**: _______________%  

**整体评价**: _______________

**主要问题**: _______________

**建议**: _______________

---

**测试人签名**: _______________  
**日期**: _______________
