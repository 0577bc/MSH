# ç¼ºå‹¤å‘¨æ•°èŒƒå›´æ˜¾ç¤ºä¿®å¤æŠ¥å‘Š

**æ—¥æœŸ**: 2025å¹´1æœˆ18æ—¥  
**é—®é¢˜**: ä¸»æ—¥è·Ÿè¸ªé¡µé¢ä¸­ç¼ºå‹¤å‘¨æ•°èŒƒå›´æ˜¾ç¤ºä¸ºç©º  
**çŠ¶æ€**: âœ… å·²ä¿®å¤

## ğŸš¨ é—®é¢˜æè¿°

### é—®é¢˜ç°è±¡
åœ¨ä¸»æ—¥è·Ÿè¸ªé¡µé¢ä¸­ï¼Œç¼ºå‹¤è®°å½•æ˜¾ç¤ºæ ¼å¼ä¸ºï¼š
```
5æ¬¡ ()  // æ‹¬å·å†…åº”è¯¥æ˜¾ç¤ºå‘¨æ•°èŒƒå›´ï¼Œä½†æ˜¾ç¤ºä¸ºç©º
6æ¬¡ ()  // æ‹¬å·å†…åº”è¯¥æ˜¾ç¤ºå‘¨æ•°èŒƒå›´ï¼Œä½†æ˜¾ç¤ºä¸ºç©º
7æ¬¡ ()  // æ‹¬å·å†…åº”è¯¥æ˜¾ç¤ºå‘¨æ•°èŒƒå›´ï¼Œä½†æ˜¾ç¤ºä¸ºç©º
```

### é¢„æœŸæ•ˆæœ
åº”è¯¥æ˜¾ç¤ºä¸ºï¼š
```
5æ¬¡ (8æœˆ1å‘¨-5å‘¨)     // 5å‘¨ç¼ºå‹¤ï¼Œä»8æœˆç¬¬1å‘¨åˆ°ç¬¬5å‘¨
6æ¬¡ (8æœˆ1å‘¨-9æœˆ1å‘¨)  // 6å‘¨ç¼ºå‹¤ï¼Œä»8æœˆç¬¬1å‘¨åˆ°9æœˆç¬¬1å‘¨
7æ¬¡ (8æœˆ1å‘¨-9æœˆ2å‘¨)  // 7å‘¨ç¼ºå‹¤ï¼Œä»8æœˆç¬¬1å‘¨åˆ°9æœˆç¬¬2å‘¨
```

### ç”¨æˆ·å½±å“
- æ— æ³•ç›´è§‚çœ‹åˆ°ç¼ºå‹¤çš„å…·ä½“æ—¶é—´èŒƒå›´
- å½±å“å¯¹ç¼ºå‹¤æƒ…å†µçš„å‡†ç¡®ç†è§£
- é™ä½ç”¨æˆ·ä½“éªŒ

## ğŸ” é—®é¢˜åˆ†æ

### æ ¹æœ¬åŸå› 
åœ¨`sunday-tracking.js`ä¸­è°ƒç”¨`getAbsenceWeekRange`å‡½æ•°æ—¶ï¼Œä½¿ç”¨äº†é”™è¯¯çš„å­—æ®µåï¼š

```javascript
// é—®é¢˜ä»£ç 
const weekRange = getAbsenceWeekRange(item.startDate, item.consecutiveAbsences);
```

### å­—æ®µåˆ†æ
1. **`item.startDate`**: åœ¨`generateTrackingList`å‡½æ•°ä¸­æ²¡æœ‰è®¾ç½®ï¼Œå€¼ä¸º`undefined`
2. **`item.trackingStartDate`**: æ­£ç¡®è®¾ç½®äº†å¼€å§‹æ—¥æœŸï¼Œå¦‚`2025-08-03`

### æ•°æ®æµåˆ†æ
```javascript
// åœ¨utils.jsçš„generateTrackingListå‡½æ•°ä¸­
const newEventRecord = {
  // ... å…¶ä»–å­—æ®µ
  trackingStartDate: event.startDate instanceof Date ? 
    event.startDate.toISOString().split('T')[0] : event.startDate,
  // æ³¨æ„ï¼šæ²¡æœ‰è®¾ç½®startDateå­—æ®µ
};

// åœ¨sunday-tracking.jsä¸­
const weekRange = getAbsenceWeekRange(item.startDate, item.consecutiveAbsences);
// item.startDate æ˜¯ undefinedï¼Œå¯¼è‡´å‡½æ•°è¿”å›ç©ºå­—ç¬¦ä¸²
```

### å‡½æ•°è¡Œä¸ºåˆ†æ
```javascript
function getAbsenceWeekRange(startDate, consecutiveAbsences) {
  if (!startDate || !consecutiveAbsences) return '';  // å› ä¸ºstartDateæ˜¯undefinedï¼Œç›´æ¥è¿”å›ç©ºå­—ç¬¦ä¸²
  // ... å…¶ä»–é€»è¾‘
}
```

## ğŸ”§ ä¿®å¤æ–¹æ¡ˆ

### ä¿®å¤ç­–ç•¥
å°†è°ƒç”¨`getAbsenceWeekRange`å‡½æ•°æ—¶çš„å‚æ•°ä»`item.startDate`æ”¹ä¸º`item.trackingStartDate`ï¼š

```javascript
// ä¿®å¤å‰
const weekRange = getAbsenceWeekRange(item.startDate, item.consecutiveAbsences);

// ä¿®å¤å
const weekRange = getAbsenceWeekRange(item.trackingStartDate, item.consecutiveAbsences);
```

### ä¿®å¤ä½ç½®
- **æ–‡ä»¶**: `src/sunday-tracking.js`
- **å‡½æ•°**: `displayTrackingList()`
- **è¡Œæ•°**: 525

### ä¿®å¤é€»è¾‘
1. **å­—æ®µæ˜ å°„**: ä½¿ç”¨æ­£ç¡®çš„`trackingStartDate`å­—æ®µ
2. **æ•°æ®ä¼ é€’**: ç¡®ä¿å¼€å§‹æ—¥æœŸæ­£ç¡®ä¼ é€’ç»™æ˜¾ç¤ºå‡½æ•°
3. **æ ¼å¼è®¡ç®—**: å‡½æ•°èƒ½å¤Ÿæ­£ç¡®è®¡ç®—å‘¨æ•°èŒƒå›´

## âœ… éªŒè¯ç»“æœ

### ä¿®å¤å‰
```javascript
// è¾“å…¥å‚æ•°
{ startDate: undefined, consecutiveAbsences: 5 }

// å‡½æ•°è¿”å›
''  // ç©ºå­—ç¬¦ä¸²

// æ˜¾ç¤ºç»“æœ
'5æ¬¡ ()'  // æ‹¬å·å†…ä¸ºç©º
```

### ä¿®å¤å
```javascript
// è¾“å…¥å‚æ•°
{ trackingStartDate: '2025-08-03', consecutiveAbsences: 5 }

// å‡½æ•°è¿”å›
'8æœˆ1å‘¨-5å‘¨'

// æ˜¾ç¤ºç»“æœ
'5æ¬¡ (8æœˆ1å‘¨-5å‘¨)'  // æ­£ç¡®æ˜¾ç¤ºå‘¨æ•°èŒƒå›´
```

### æµ‹è¯•æ¡ˆä¾‹
| ç¼ºå‹¤å‘¨æ•° | å¼€å§‹æ—¥æœŸ | æ˜¾ç¤ºç»“æœ |
|----------|----------|----------|
| 5å‘¨ | 2025-08-03 | 5æ¬¡ (8æœˆ1å‘¨-5å‘¨) |
| 6å‘¨ | 2025-08-03 | 6æ¬¡ (8æœˆ1å‘¨-9æœˆ1å‘¨) |
| 7å‘¨ | 2025-08-03 | 7æ¬¡ (8æœˆ1å‘¨-9æœˆ2å‘¨) |
| 1å‘¨ | 2025-09-14 | 1æ¬¡ (9æœˆ2å‘¨) |

## ğŸ“Š å½±å“èŒƒå›´

### ä¿®å¤å‰
- âŒ ç¼ºå‹¤å‘¨æ•°èŒƒå›´æ˜¾ç¤ºä¸ºç©º
- âŒ ç”¨æˆ·æ— æ³•çœ‹åˆ°å…·ä½“ç¼ºå‹¤æ—¶é—´
- âŒ å½±å“å¯¹ç¼ºå‹¤æƒ…å†µçš„ç†è§£

### ä¿®å¤å
- âœ… ç¼ºå‹¤å‘¨æ•°èŒƒå›´æ­£ç¡®æ˜¾ç¤º
- âœ… ç”¨æˆ·èƒ½æ¸…æ¥šçœ‹åˆ°ç¼ºå‹¤æ—¶é—´èŒƒå›´
- âœ… æå‡ç”¨æˆ·ä½“éªŒå’Œç†è§£åº¦

## ğŸ¯ æŠ€æœ¯ç»†èŠ‚

### å…³é”®ä¿®å¤
```javascript
// ä¿®å¤å‰ï¼šä½¿ç”¨æœªå®šä¹‰çš„å­—æ®µ
const weekRange = getAbsenceWeekRange(item.startDate, item.consecutiveAbsences);

// ä¿®å¤åï¼šä½¿ç”¨æ­£ç¡®çš„å­—æ®µ
const weekRange = getAbsenceWeekRange(item.trackingStartDate, item.consecutiveAbsences);
```

### å­—æ®µå¯¹æ¯”
| å­—æ®µå | æ˜¯å¦è®¾ç½® | å€¼ç¤ºä¾‹ | ç”¨é€” |
|--------|----------|--------|------|
| `startDate` | âŒ æœªè®¾ç½® | `undefined` | é”™è¯¯ä½¿ç”¨ |
| `trackingStartDate` | âœ… å·²è®¾ç½® | `'2025-08-03'` | æ­£ç¡®ä½¿ç”¨ |

### æ˜¾ç¤ºé€»è¾‘
1. **å•å‘¨ç¼ºå‹¤**: æ˜¾ç¤ºä¸º"XæœˆYå‘¨"
2. **å¤šå‘¨ç¼ºå‹¤ï¼ˆåŒæœˆï¼‰**: æ˜¾ç¤ºä¸º"XæœˆYå‘¨-Zå‘¨"
3. **å¤šå‘¨ç¼ºå‹¤ï¼ˆè·¨æœˆï¼‰**: æ˜¾ç¤ºä¸º"XæœˆYå‘¨-ZæœˆWå‘¨"

## ğŸ”„ ç›¸å…³åŠŸèƒ½

### æ¶‰åŠå‡½æ•°
- `getAbsenceWeekRange()` - è®¡ç®—ç¼ºå‹¤å‘¨æ•°èŒƒå›´
- `displayTrackingList()` - æ˜¾ç¤ºè·Ÿè¸ªåˆ—è¡¨
- `generateTrackingList()` - ç”Ÿæˆè·Ÿè¸ªåˆ—è¡¨

### ç›¸å…³æ•°æ®
- `trackingStartDate` - è·Ÿè¸ªå¼€å§‹æ—¥æœŸ
- `consecutiveAbsences` - è¿ç»­ç¼ºå‹¤æ¬¡æ•°
- `absenceDisplay` - ç¼ºå‹¤æ˜¾ç¤ºæ ¼å¼

### æ˜¾ç¤ºæµç¨‹
1. **æ•°æ®ç”Ÿæˆ**: `generateTrackingList()`ç”Ÿæˆè·Ÿè¸ªè®°å½•
2. **å­—æ®µè®¾ç½®**: è®¾ç½®`trackingStartDate`å­—æ®µ
3. **æ˜¾ç¤ºè°ƒç”¨**: `displayTrackingList()`è°ƒç”¨æ˜¾ç¤ºå‡½æ•°
4. **èŒƒå›´è®¡ç®—**: `getAbsenceWeekRange()`è®¡ç®—å‘¨æ•°èŒƒå›´
5. **æ ¼å¼æ˜¾ç¤º**: åœ¨é¡µé¢ä¸Šæ˜¾ç¤ºå®Œæ•´çš„ç¼ºå‹¤ä¿¡æ¯

## ğŸ“ æ€»ç»“

æ­¤æ¬¡ä¿®å¤è§£å†³äº†ä¸»æ—¥è·Ÿè¸ªé¡µé¢ä¸­ç¼ºå‹¤å‘¨æ•°èŒƒå›´æ˜¾ç¤ºä¸ºç©ºçš„é—®é¢˜ã€‚ä¿®å¤åçš„ç³»ç»Ÿèƒ½å¤Ÿï¼š

- âœ… **æ­£ç¡®æ˜¾ç¤ºç¼ºå‹¤å‘¨æ•°èŒƒå›´**: ä½¿ç”¨æ­£ç¡®çš„å­—æ®µåä¼ é€’å¼€å§‹æ—¥æœŸ
- âœ… **æä¾›è¯¦ç»†çš„ç¼ºå‹¤ä¿¡æ¯**: ç”¨æˆ·èƒ½æ¸…æ¥šçœ‹åˆ°ç¼ºå‹¤çš„å…·ä½“æ—¶é—´èŒƒå›´
- âœ… **æ”¯æŒè·¨æœˆæ˜¾ç¤º**: æ­£ç¡®å¤„ç†è·¨æœˆçš„ç¼ºå‹¤æƒ…å†µ
- âœ… **æå‡ç”¨æˆ·ä½“éªŒ**: ç¼ºå‹¤ä¿¡æ¯æ›´åŠ ç›´è§‚å’Œæœ‰ç”¨

### ä¸»è¦æˆæœ
- **å­—æ®µæ˜ å°„ä¿®å¤**: ä½¿ç”¨æ­£ç¡®çš„`trackingStartDate`å­—æ®µ
- **æ˜¾ç¤ºé€»è¾‘å®Œå–„**: ç¼ºå‹¤å‘¨æ•°èŒƒå›´æ­£ç¡®è®¡ç®—å’Œæ˜¾ç¤º
- **ç”¨æˆ·ä½“éªŒæ”¹å–„**: ç¼ºå‹¤ä¿¡æ¯æ›´åŠ è¯¦ç»†å’Œç›´è§‚
- **åŠŸèƒ½å®Œæ•´æ€§**: ä¸»æ—¥è·Ÿè¸ªåŠŸèƒ½å®Œå…¨æ­£å¸¸

è¿™æ˜¯ä¸€ä¸ªç®€å•çš„å­—æ®µåé”™è¯¯ä¿®å¤ï¼Œä½†è§£å†³äº†ç”¨æˆ·ç•Œé¢æ˜¾ç¤ºçš„é‡è¦é—®é¢˜ã€‚ä¿®å¤åï¼Œç”¨æˆ·èƒ½å¤Ÿæ¸…æ¥šåœ°çœ‹åˆ°æ¯ä¸ªæˆå‘˜çš„ç¼ºå‹¤æ—¶é—´èŒƒå›´ï¼Œå¤§å¤§æå‡äº†ç³»ç»Ÿçš„å¯ç”¨æ€§å’Œç”¨æˆ·ä½“éªŒã€‚
