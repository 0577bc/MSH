#!/bin/bash

echo "ğŸ§¹ å¼€å§‹æ¸…ç†Gitå†å²è®°å½•..."

# å¤‡ä»½å½“å‰åˆ†æ”¯
echo "ğŸ“¦ åˆ›å»ºå¤‡ä»½åˆ†æ”¯..."
git branch backup-before-cleanup

# ä½¿ç”¨git rebase -i æ¥åˆå¹¶é‡å¤æäº¤
echo "ğŸ”„ å¼€å§‹äº¤äº’å¼rebase..."
echo "è¯·æ‰‹åŠ¨ç¼–è¾‘rebaseæ–‡ä»¶ï¼Œå°†é‡å¤çš„æäº¤æ ‡è®°ä¸º 'squash' æˆ– 's'"
echo "é‡å¤æäº¤åŒ…æ‹¬ï¼š"
echo "- ä¿®å¤äº‹ä»¶ç»ˆæ­¢åŠŸèƒ½å¤±æ•ˆé—®é¢˜ (å¤šä¸ª)"
echo "- ä¿®å¤æ•°æ®ä¸ä¸€è‡´é—®é¢˜ (å¤šä¸ª)"
echo "- æ–‡ä»¶æ•´ç†å’Œç³»ç»Ÿä¼˜åŒ– (å¤šä¸ª)"

# å¯åŠ¨äº¤äº’å¼rebase
git rebase -i HEAD~20

echo "âœ… Gitå†å²æ¸…ç†å®Œæˆï¼"
echo "ğŸ“‹ æŸ¥çœ‹æ¸…ç†åçš„å†å²ï¼š"
git log --oneline | head -10

echo "âš ï¸  å¦‚æœéœ€è¦æ¢å¤ï¼Œå¯ä»¥ä½¿ç”¨ï¼šgit reset --hard backup-before-cleanup"
