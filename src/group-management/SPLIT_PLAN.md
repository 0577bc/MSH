# group-management.js æ‹†åˆ†è®¡åˆ’

**åŸæ–‡ä»¶**: src/group-management.js (1676è¡Œ)  
**ç›®æ ‡**: æ‹†åˆ†ä¸º6ä¸ªæ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—ä¸è¶…è¿‡500è¡Œ  
**æ–¹æ³•**: å…ˆå»ºç«‹æ¡†æ¶ï¼Œå†é€æ­¥ç§»æ¤ä»£ç 

---

## ğŸ“Š æ–‡ä»¶ç»“æ„åˆ†æ

| æ¨¡å—åç§° | è¡Œæ•°èŒƒå›´ | ä»£ç è¡Œæ•° | ä¸»è¦åŠŸèƒ½ |
|---------|---------|---------|---------|
| å…¨å±€å˜é‡ | 6-26 | 21è¡Œ | å…¨å±€å˜é‡ã€DOMå…ƒç´ å¼•ç”¨ |
| åˆå§‹åŒ– | 27-507 | 480è¡Œ | é¡µé¢åˆå§‹åŒ–ã€æ•°æ®åŠ è½½ã€äº‹ä»¶ç»‘å®š |
| å°ç»„ç®¡ç† | 507-617 | 110è¡Œ | å°ç»„å¢åˆ æ”¹æŸ¥ |
| æˆå‘˜ç®¡ç† | 617-954 | 337è¡Œ | æˆå‘˜å¢åˆ æ”¹æŸ¥ã€ç§»åŠ¨ |
| äººå‘˜æ£€ç´¢ | 954-1029 | 75è¡Œ | æœç´¢åŠŸèƒ½ |
| æˆå‘˜ç§»åŠ¨ | 1034-1207 | 173è¡Œ | æˆå‘˜ç§»åŠ¨åŠŸèƒ½ |
| å¯¼å‡ºåŠŸèƒ½ | 1207-1434 | 227è¡Œ | å¯¼å‡ºCSV/JSON |
| ä¿®æ”¹ç»„å | 1434-1676 | 242è¡Œ | ä¿®æ”¹ç»„åã€è¡¨å•å¤„ç† |

**æ€»è®¡**: 1676è¡Œ

---

## ğŸ¯ æ‹†åˆ†æ–¹æ¡ˆ

### æ¨¡å—1: shared-state.js (~100è¡Œ)
**åŠŸèƒ½**: å…¨å±€çŠ¶æ€ç®¡ç†
- å…¨å±€å˜é‡å®šä¹‰
- DOMå…ƒç´ å¼•ç”¨
- çŠ¶æ€æ ‡å¿—ä½
- é€‰ä¸­æˆå‘˜å˜é‡

### æ¨¡å—2: init-module.js (~400è¡Œ)
**åŠŸèƒ½**: åˆå§‹åŒ–å’Œæ•°æ®åŠ è½½
- `initializePage()` - ä¸»åˆå§‹åŒ–å‡½æ•°
- `initializeFirebase()` - Firebaseåˆå§‹åŒ–
- `initializeDOMElements()` - DOMå…ƒç´ åˆå§‹åŒ–
- `waitForNewDataManager()` - ç­‰å¾…æ•°æ®ç®¡ç†å™¨
- `loadData()` - æ•°æ®åŠ è½½
- `loadFromLocalStorageWithValidation()` - æœ¬åœ°å­˜å‚¨åŠ è½½
- `normalizeDataFormat()` - æ•°æ®æ ¼å¼åŒ–
- `validateDataIntegrity()` - æ•°æ®éªŒè¯
- `initializePageDisplay()` - é¡µé¢æ˜¾ç¤ºåˆå§‹åŒ–
- `preventFormSubmission()` - é˜²æ­¢è¡¨å•æäº¤

### æ¨¡å—3: event-handlers.js (~300è¡Œ)
**åŠŸèƒ½**: äº‹ä»¶ç›‘å¬å’Œå¤„ç†
- `initializeEventListeners()` - äº‹ä»¶ç›‘å¬å™¨åˆå§‹åŒ–
- `initializeFormEvents()` - è¡¨å•äº‹ä»¶åˆå§‹åŒ–
- æ‰€æœ‰æŒ‰é’®ç‚¹å‡»äº‹ä»¶å¤„ç†å™¨

### æ¨¡å—4: group-member-operations.js (~500è¡Œ)
**åŠŸèƒ½**: å°ç»„å’Œæˆå‘˜ç®¡ç†
- **å°ç»„ç®¡ç†**:
  - `updateGroupSelect()` - æ›´æ–°å°ç»„é€‰æ‹©
  - `handleGroupSelect()` - å¤„ç†å°ç»„é€‰æ‹©
  - `showAddGroupForm()` - æ˜¾ç¤ºæ·»åŠ å°ç»„è¡¨å•
  - `handleSaveGroup()` - ä¿å­˜å°ç»„
- **æˆå‘˜ç®¡ç†**:
  - `displayMembers()` - æ˜¾ç¤ºæˆå‘˜åˆ—è¡¨
  - `showAddMemberForm()` - æ˜¾ç¤ºæ·»åŠ æˆå‘˜è¡¨å•
  - `handleSaveMember()` - ä¿å­˜æˆå‘˜
  - `editMember()` - ç¼–è¾‘æˆå‘˜
  - `handleSaveEditMember()` - ä¿å­˜ç¼–è¾‘
  - `deleteMember()` - åˆ é™¤æˆå‘˜
  - `handleDeleteMember()` - å¤„ç†åˆ é™¤
  - `handleRegenerateIds()` - é‡æ–°ç”ŸæˆID
- **æˆå‘˜ç§»åŠ¨**:
  - `performMemberMove()` - æ‰§è¡Œæˆå‘˜ç§»åŠ¨

### æ¨¡å—5: search-export.js (~350è¡Œ)
**åŠŸèƒ½**: æœç´¢å’Œå¯¼å‡º
- **æœç´¢åŠŸèƒ½**:
  - `handleMemberSearch()` - å¤„ç†æœç´¢
  - `showSuggestions()` - æ˜¾ç¤ºå»ºè®®
  - `hideSuggestions()` - éšè—å»ºè®®
  - `selectMember()` - é€‰æ‹©æˆå‘˜
- **å¯¼å‡ºåŠŸèƒ½**:
  - `showExportDialog()` - æ˜¾ç¤ºå¯¼å‡ºå¯¹è¯æ¡†
  - `hideExportDialog()` - éšè—å¯¼å‡ºå¯¹è¯æ¡†
  - `handleExportMembers()` - å¤„ç†å¯¼å‡º
  - `exportToCSV()` - å¯¼å‡ºCSV
  - `exportToJSON()` - å¯¼å‡ºJSON

### æ¨¡å—6: group-name-editor.js (~250è¡Œ)
**åŠŸèƒ½**: ä¿®æ”¹ç»„å
- `showEditGroupForm()` - æ˜¾ç¤ºç¼–è¾‘è¡¨å•
- `hideEditGroupForm()` - éšè—ç¼–è¾‘è¡¨å•
- `handleSaveEditGroup()` - ä¿å­˜ä¿®æ”¹
- è¾…åŠ©å‡½æ•°

### æ¨¡å—7: index.js (~50è¡Œ)
**åŠŸèƒ½**: ä¸»å…¥å£æ–‡ä»¶
- å¯¼å…¥æ‰€æœ‰æ¨¡å—
- å¯åŠ¨é¡µé¢åˆå§‹åŒ–
- DOMContentLoaded äº‹ä»¶å¤„ç†

---

## ğŸ”„ ç§»æ¤é¡ºåº

1. âœ… åˆ›å»ºæ¡†æ¶æ–‡ä»¶ï¼ˆç©ºæ–‡ä»¶ï¼‰
2. â³ ç§»æ¤ shared-state.js
3. â³ ç§»æ¤ init-module.js
4. â³ ç§»æ¤ event-handlers.js
5. â³ ç§»æ¤ group-member-operations.js
6. â³ ç§»æ¤ search-export.js
7. â³ ç§»æ¤ group-name-editor.js
8. â³ åˆ›å»º index.js å…¥å£
9. â³ æ›´æ–° group-management.html å¼•ç”¨
10. â³ æµ‹è¯•éªŒè¯

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å…¨å±€å˜é‡è®¿é—®**: ä½¿ç”¨ `window.groupManagement.xxx` ç»Ÿä¸€å‘½åç©ºé—´
2. **å‡½æ•°å¯¼å‡º**: æ‰€æœ‰å‡½æ•°å¯¼å‡ºåˆ° `window.groupManagement`
3. **ä¾èµ–å…³ç³»**: ä¿æŒæ¨¡å—é—´ä¾èµ–æ¸…æ™°
4. **å‘åå…¼å®¹**: ç¡®ä¿ç°æœ‰åŠŸèƒ½ä¸å—å½±å“
5. **æµ‹è¯•éªŒè¯**: æ¯ä¸ªæ¨¡å—ç§»æ¤åéƒ½è¦éªŒè¯

---

**åˆ›å»ºæ—¥æœŸ**: 2025-10-14  
**è´Ÿè´£äºº**: AI Agent  
**é¢„è®¡æ—¶é—´**: 2-3å°æ—¶


