# summary.js 拆分计划

**原文件**: src/summary.js (1302行)  
**目标**: 拆分为4个模块，每个模块不超过500行  
**方法**: 先建立框架，再逐步移植代码

---

## 📊 文件结构分析

| 模块名称 | 行数范围 | 代码行数 | 主要功能 |
|---------|---------|---------|---------|
| 全局变量和初始化 | 8-37 | 30行 | 全局变量 |
| Firebase初始化 | 37-53 | 16行 | Firebase初始化 |
| 页面同步管理器 | 53-63 | 10行 | 页面同步 |
| DOM元素初始化 | 63-140 | 77行 | DOM元素 |
| 基础数据加载 | 140-225 | 85行 | 数据加载 |
| 按需加载签到数据 | 225-325 | 100行 | 签到数据 |
| 数据加载和管理 | 325-328 | 3行 | 管理函数 |
| 缓存管理函数 | 328-385 | 57行 | 缓存处理 |
| 事件监听器 | 385-629 | 244行 | 事件绑定 |
| 数据同步 | 629-632 | 3行 | 同步初始化 |
| 事件处理函数 | 632-634 | 2行 | 处理函数 |
| 表格渲染 | 634-1302 | 668行 | 渲染逻辑 |

**总计**: 1302行

---

## 🎯 拆分方案

### 模块1: shared-state.js (~150行)
**功能**: 全局状态管理
- 全局变量定义
- DOM元素引用
- 页面状态标志

### 模块2: init-module.js (~400行)
**功能**: 初始化和数据加载
- Firebase初始化
- 页面同步管理器
- DOM元素初始化
- 基础数据加载
- 按需加载签到数据
- 缓存管理函数

### 模块3: event-handlers.js (~250行)
**功能**: 事件处理
- 事件监听器初始化
- 事件处理函数

### 模块4: table-renderer.js (~500行)
**功能**: 表格渲染
- 日报表渲染
- 季度报表渲染
- 年度报表渲染
- 数据展示逻辑

### 模块5: index.js (~50行)
**功能**: 主入口文件
- 模块加载验证
- 页面初始化入口

---

**创建日期**: 2025-10-14  
**预计时间**: 45-60分钟


